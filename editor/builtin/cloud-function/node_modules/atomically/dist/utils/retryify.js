"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.retryifySync=exports.retryifyAsync=void 0;const t=require("./retryify_queue");exports.retryifyAsync=((e,r)=>(function(n){return function o(){return t.default.schedule().then(t=>e.apply(void 0,arguments).then(e=>(t(),e),e=>{if(t(),Date.now()>=n)throw e;if(r(e)){const t=Math.round(100+400*Math.random());return new Promise(e=>setTimeout(e,t)).then(()=>o.apply(void 0,arguments))}throw e}))}}));exports.retryifySync=((t,e)=>(function(r){return function n(){try{return t.apply(void 0,arguments)}catch(t){if(Date.now()>r)throw t;if(e(t))return n.apply(void 0,arguments);throw t}}}));