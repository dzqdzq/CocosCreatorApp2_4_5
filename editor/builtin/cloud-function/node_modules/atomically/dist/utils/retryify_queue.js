"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e={interval:25,intervalId:void 0,limit:require("../consts").LIMIT_FILES_DESCRIPTORS,queueActive:new Set,queueWaiting:new Set,init:()=>{e.intervalId||(e.intervalId=setInterval(e.tick,e.interval))},reset:()=>{e.intervalId&&(clearInterval(e.intervalId),delete e.intervalId)},add:i=>{e.queueWaiting.add(i),e.queueActive.size<e.limit/2?e.tick():e.init()},remove:i=>{e.queueWaiting.delete(i),e.queueActive.delete(i)},schedule:()=>new Promise(i=>{const t=()=>e.remove(u),u=()=>i(t);e.add(u)}),tick:()=>{if(!(e.queueActive.size>=e.limit)){if(!e.queueWaiting.size)return e.reset();for(const i of e.queueWaiting){if(e.queueActive.size>=e.limit)break;e.queueWaiting.delete(i),e.queueActive.add(i),i()}}}};exports.default=e;