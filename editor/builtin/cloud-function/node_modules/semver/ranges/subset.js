const r=require("../classes/range.js"),{ANY:e}=require("../classes/comparator.js"),o=require("../functions/satisfies.js"),t=require("../functions/compare.js"),n=(r,n,i)=>{if(r===n)return!0;if(1===r.length&&r[0].semver===e)return 1===n.length&&n[0].semver===e;const u=new Set;let a,p,l,c,m,v,g;for(const e of r)">"===e.operator||">="===e.operator?a=s(a,e,i):"<"===e.operator||"<="===e.operator?p=f(p,e,i):u.add(e.semver);if(u.size>1)return null;if(a&&p){if((l=t(a.semver,p.semver,i))>0)return null;if(0===l&&(">="!==a.operator||"<="!==p.operator))return null}for(const r of u){if(a&&!o(r,String(a),i))return null;if(p&&!o(r,String(p),i))return null;for(const e of n)if(!o(r,String(e),i))return!1;return!0}for(const r of n){if(g=g||">"===r.operator||">="===r.operator,v=v||"<"===r.operator||"<="===r.operator,a)if(">"===r.operator||">="===r.operator){if((c=s(a,r,i))===r&&c!==a)return!1}else if(">="===a.operator&&!o(a.semver,String(r),i))return!1;if(p)if("<"===r.operator||"<="===r.operator){if((m=f(p,r,i))===r&&m!==p)return!1}else if("<="===p.operator&&!o(p.semver,String(r),i))return!1;if(!r.operator&&(p||a)&&0!==l)return!1}return!(a&&v&&!p&&0!==l)&&!(p&&g&&!a&&0!==l)},s=(r,e,o)=>{if(!r)return e;const n=t(r.semver,e.semver,o);return n>0?r:n<0?e:">"===e.operator&&">="===r.operator?e:r},f=(r,e,o)=>{if(!r)return e;const n=t(r.semver,e.semver,o);return n<0?r:n>0?e:"<"===e.operator&&"<="===r.operator?e:r};module.exports=((e,o,t)=>{if(e===o)return!0;e=new r(e,t),o=new r(o,t);let s=!1;r:for(const r of e.set){for(const e of o.set){const o=n(r,e,t);if(s=s||null!==o,o)continue r}if(s)return!1}return!0});