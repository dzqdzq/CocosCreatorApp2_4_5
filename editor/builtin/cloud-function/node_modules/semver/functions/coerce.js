const e=require("../classes/semver"),n=require("./parse"),{re:t,t:l}=require("../internal/re");module.exports=((r,i)=>{if(r instanceof e)return r;if("number"==typeof r&&(r=String(r)),"string"!=typeof r)return null;let s=null;if((i=i||{}).rtl){let e;for(;(e=t[l.COERCERTL].exec(r))&&(!s||s.index+s[0].length!==r.length);)s&&e.index+e[0].length===s.index+s[0].length||(s=e),t[l.COERCERTL].lastIndex=e.index+e[1].length+e[2].length;t[l.COERCERTL].lastIndex=-1}else s=r.match(t[l.COERCE]);return null===s?null:n(`${s[2]}.${s[3]||"0"}.${s[4]||"0"}`,i)});