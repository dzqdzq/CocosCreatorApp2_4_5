"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deserializeStream=exports.calculateObjectSize=exports.deserialize=exports.serializeWithBufferAndIndex=exports.serialize=exports.setInternalBufferSize=exports.ObjectID=exports.Decimal128=exports.BSONRegExp=exports.MaxKey=exports.MinKey=exports.Int32=exports.Double=exports.Timestamp=exports.Long=exports.ObjectId=exports.Binary=exports.DBRef=exports.BSONSymbol=exports.Map=exports.Code=exports.LongWithoutOverridesClass=exports.EJSON=exports.BSON_INT64_MIN=exports.BSON_INT64_MAX=exports.BSON_INT32_MIN=exports.BSON_INT32_MAX=exports.BSON_DATA_UNDEFINED=exports.BSON_DATA_TIMESTAMP=exports.BSON_DATA_SYMBOL=exports.BSON_DATA_STRING=exports.BSON_DATA_REGEXP=exports.BSON_DATA_OID=exports.BSON_DATA_OBJECT=exports.BSON_DATA_NUMBER=exports.BSON_DATA_NULL=exports.BSON_DATA_MIN_KEY=exports.BSON_DATA_MAX_KEY=exports.BSON_DATA_LONG=exports.BSON_DATA_INT=exports.BSON_DATA_DECIMAL128=exports.BSON_DATA_DBPOINTER=exports.BSON_DATA_DATE=exports.BSON_DATA_CODE_W_SCOPE=exports.BSON_DATA_CODE=exports.BSON_DATA_BOOLEAN=exports.BSON_DATA_BINARY=exports.BSON_DATA_ARRAY=exports.BSON_BINARY_SUBTYPE_UUID_NEW=exports.BSON_BINARY_SUBTYPE_UUID=exports.BSON_BINARY_SUBTYPE_USER_DEFINED=exports.BSON_BINARY_SUBTYPE_MD5=exports.BSON_BINARY_SUBTYPE_FUNCTION=exports.BSON_BINARY_SUBTYPE_DEFAULT=exports.BSON_BINARY_SUBTYPE_BYTE_ARRAY=void 0;const e=require("buffer"),r=require("./binary");Object.defineProperty(exports,"Binary",{enumerable:!0,get:function(){return r.Binary}});const t=require("./code");Object.defineProperty(exports,"Code",{enumerable:!0,get:function(){return t.Code}});const n=require("./db_ref");Object.defineProperty(exports,"DBRef",{enumerable:!0,get:function(){return n.DBRef}});const o=require("./decimal128");Object.defineProperty(exports,"Decimal128",{enumerable:!0,get:function(){return o.Decimal128}});const i=require("./double");Object.defineProperty(exports,"Double",{enumerable:!0,get:function(){return i.Double}});const _=require("./ensure_buffer"),u=require("./extended_json"),O=require("./int_32");Object.defineProperty(exports,"Int32",{enumerable:!0,get:function(){return O.Int32}});const s=require("./long");Object.defineProperty(exports,"Long",{enumerable:!0,get:function(){return s.Long}});const p=require("./map");Object.defineProperty(exports,"Map",{enumerable:!0,get:function(){return p.Map}});const N=require("./max_key");Object.defineProperty(exports,"MaxKey",{enumerable:!0,get:function(){return N.MaxKey}});const B=require("./min_key");Object.defineProperty(exports,"MinKey",{enumerable:!0,get:function(){return B.MinKey}});const A=require("./objectid");Object.defineProperty(exports,"ObjectId",{enumerable:!0,get:function(){return A.ObjectId}}),Object.defineProperty(exports,"ObjectID",{enumerable:!0,get:function(){return A.ObjectId}});const c=require("./parser/calculate_size"),S=require("./parser/deserializer"),f=require("./parser/serializer"),a=require("./regexp");Object.defineProperty(exports,"BSONRegExp",{enumerable:!0,get:function(){return a.BSONRegExp}});const b=require("./symbol");Object.defineProperty(exports,"BSONSymbol",{enumerable:!0,get:function(){return b.BSONSymbol}});const l=require("./timestamp");Object.defineProperty(exports,"Timestamp",{enumerable:!0,get:function(){return l.Timestamp}});var x=require("./constants");Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_BYTE_ARRAY",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_BYTE_ARRAY}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_DEFAULT",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_DEFAULT}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_FUNCTION",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_FUNCTION}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_MD5",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_MD5}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_USER_DEFINED",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_USER_DEFINED}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_UUID",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_UUID}}),Object.defineProperty(exports,"BSON_BINARY_SUBTYPE_UUID_NEW",{enumerable:!0,get:function(){return x.BSON_BINARY_SUBTYPE_UUID_NEW}}),Object.defineProperty(exports,"BSON_DATA_ARRAY",{enumerable:!0,get:function(){return x.BSON_DATA_ARRAY}}),Object.defineProperty(exports,"BSON_DATA_BINARY",{enumerable:!0,get:function(){return x.BSON_DATA_BINARY}}),Object.defineProperty(exports,"BSON_DATA_BOOLEAN",{enumerable:!0,get:function(){return x.BSON_DATA_BOOLEAN}}),Object.defineProperty(exports,"BSON_DATA_CODE",{enumerable:!0,get:function(){return x.BSON_DATA_CODE}}),Object.defineProperty(exports,"BSON_DATA_CODE_W_SCOPE",{enumerable:!0,get:function(){return x.BSON_DATA_CODE_W_SCOPE}}),Object.defineProperty(exports,"BSON_DATA_DATE",{enumerable:!0,get:function(){return x.BSON_DATA_DATE}}),Object.defineProperty(exports,"BSON_DATA_DBPOINTER",{enumerable:!0,get:function(){return x.BSON_DATA_DBPOINTER}}),Object.defineProperty(exports,"BSON_DATA_DECIMAL128",{enumerable:!0,get:function(){return x.BSON_DATA_DECIMAL128}}),Object.defineProperty(exports,"BSON_DATA_INT",{enumerable:!0,get:function(){return x.BSON_DATA_INT}}),Object.defineProperty(exports,"BSON_DATA_LONG",{enumerable:!0,get:function(){return x.BSON_DATA_LONG}}),Object.defineProperty(exports,"BSON_DATA_MAX_KEY",{enumerable:!0,get:function(){return x.BSON_DATA_MAX_KEY}}),Object.defineProperty(exports,"BSON_DATA_MIN_KEY",{enumerable:!0,get:function(){return x.BSON_DATA_MIN_KEY}}),Object.defineProperty(exports,"BSON_DATA_NULL",{enumerable:!0,get:function(){return x.BSON_DATA_NULL}}),Object.defineProperty(exports,"BSON_DATA_NUMBER",{enumerable:!0,get:function(){return x.BSON_DATA_NUMBER}}),Object.defineProperty(exports,"BSON_DATA_OBJECT",{enumerable:!0,get:function(){return x.BSON_DATA_OBJECT}}),Object.defineProperty(exports,"BSON_DATA_OID",{enumerable:!0,get:function(){return x.BSON_DATA_OID}}),Object.defineProperty(exports,"BSON_DATA_REGEXP",{enumerable:!0,get:function(){return x.BSON_DATA_REGEXP}}),Object.defineProperty(exports,"BSON_DATA_STRING",{enumerable:!0,get:function(){return x.BSON_DATA_STRING}}),Object.defineProperty(exports,"BSON_DATA_SYMBOL",{enumerable:!0,get:function(){return x.BSON_DATA_SYMBOL}}),Object.defineProperty(exports,"BSON_DATA_TIMESTAMP",{enumerable:!0,get:function(){return x.BSON_DATA_TIMESTAMP}}),Object.defineProperty(exports,"BSON_DATA_UNDEFINED",{enumerable:!0,get:function(){return x.BSON_DATA_UNDEFINED}}),Object.defineProperty(exports,"BSON_INT32_MAX",{enumerable:!0,get:function(){return x.BSON_INT32_MAX}}),Object.defineProperty(exports,"BSON_INT32_MIN",{enumerable:!0,get:function(){return x.BSON_INT32_MIN}}),Object.defineProperty(exports,"BSON_INT64_MAX",{enumerable:!0,get:function(){return x.BSON_INT64_MAX}}),Object.defineProperty(exports,"BSON_INT64_MIN",{enumerable:!0,get:function(){return x.BSON_INT64_MIN}});var T=require("./extended_json");Object.defineProperty(exports,"EJSON",{enumerable:!0,get:function(){return T.EJSON}});var D=require("./timestamp");Object.defineProperty(exports,"LongWithoutOverridesClass",{enumerable:!0,get:function(){return D.LongWithoutOverridesClass}});const d=17825792;let I=e.Buffer.alloc(d);function E(r){I.length<r&&(I=e.Buffer.alloc(r))}function y(r,t={}){const n="boolean"==typeof t.checkKeys&&t.checkKeys,o="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,_="number"==typeof t.minInternalBufferSize?t.minInternalBufferSize:d;I.length<_&&(I=e.Buffer.alloc(_));const u=f.serializeInto(I,r,n,0,0,o,i,[]),O=e.Buffer.alloc(u);return I.copy(O,0,0,O.length),O}function m(e,r,t={}){const n="boolean"==typeof t.checkKeys&&t.checkKeys,o="boolean"==typeof t.serializeFunctions&&t.serializeFunctions,i="boolean"!=typeof t.ignoreUndefined||t.ignoreUndefined,_="number"==typeof t.index?t.index:0,u=f.serializeInto(I,e,n,0,0,o,i);return I.copy(r,_,0,u),_+u-1}function P(e,r={}){return S.deserialize(_.ensureBuffer(e),r)}function g(e,r={}){const t="boolean"==typeof(r=r||{}).serializeFunctions&&r.serializeFunctions,n="boolean"!=typeof r.ignoreUndefined||r.ignoreUndefined;return c.calculateObjectSize(e,t,n)}function j(e,r,t,n,o,i){const u=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},i),O=_.ensureBuffer(e);let s=r;for(let e=0;e<t;e++){const r=O[s]|O[s+1]<<8|O[s+2]<<16|O[s+3]<<24;u.index=s,n[o+e]=S.deserialize(O,u),s+=r}return s}exports.setInternalBufferSize=E,exports.serialize=y,exports.serializeWithBufferAndIndex=m,exports.deserialize=P,exports.calculateObjectSize=g,exports.deserializeStream=j;const Y={Binary:r.Binary,Code:t.Code,DBRef:n.DBRef,Decimal128:o.Decimal128,Double:i.Double,Int32:O.Int32,Long:s.Long,Map:p.Map,MaxKey:N.MaxKey,MinKey:B.MinKey,ObjectId:A.ObjectId,ObjectID:A.ObjectId,BSONRegExp:a.BSONRegExp,BSONSymbol:b.BSONSymbol,Timestamp:l.Timestamp,EJSON:u.EJSON,setInternalBufferSize:E,serialize:y,serializeWithBufferAndIndex:m,deserialize:P,calculateObjectSize:g,deserializeStream:j};exports.default=Y;