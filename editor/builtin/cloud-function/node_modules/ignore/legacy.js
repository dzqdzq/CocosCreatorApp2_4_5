"use strict";function t(t,n){for(var e=0;e<n.length;e++){var r=n[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function n(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function e(t){return Array.isArray(t)?t:[t]}var r=/^\s+$/,i=/^\\!/,u=/^\\#/,o=/\r?\n/g,c=/^\.*\/|^\.+$/,a="undefined"!=typeof Symbol?Symbol.for("node-ignore"):"node-ignore",s=function(t,n,e){return Object.defineProperty(t,n,{value:e})},f=/([0-z])-([0-z])/g,h=[[/\\?\s+$/,function(t){return 0===t.indexOf("\\")?" ":""}],[/\\\s/g,function(){return" "}],[/[\\$.|*+(){^]/g,function(t){return"\\".concat(t)}],[/(?!\\)\?/g,function(){return"[^/]"}],[/^\//,function(){return"^"}],[/\//g,function(){return"\\/"}],[/^\^*\\\*\\\*\\\//,function(){return"^(?:.*\\/)?"}],[/^(?=[^^])/,function(){return/\/(?!$)/.test(this)?"^":"(?:^|\\/)"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,function(t,n,e){return n+6<e.length?"(?:\\/[^\\/]+)*":"\\/.+"}],[/(^|[^\\]+)\\\*(?=.+)/g,function(t,n){return"".concat(n,"[^\\/]*")}],[/\\\\\\(?=[$.|*+(){^])/g,function(){return"\\"}],[/\\\\/g,function(){return"\\"}],[/(\\)?\[([^\]/]*?)(\\*)($|\])/g,function(t,n,e,r,i){return"\\"===n?"\\[".concat(e).concat(function(t){var n=t.length;return t.slice(0,n-n%2)}(r)).concat(i):"]"===i&&r.length%2==0?"[".concat(function(t){return t.replace(f,function(t,n,e){return n.charCodeAt(0)<=e.charCodeAt(0)?t:""})}(e)).concat(r,"]"):"[]"}],[/(?:[^*])$/,function(t){return/\/$/.test(t)?"".concat(t,"$"):"".concat(t,"(?=$|\\/$)")}],[/(\^|\\\/)?\\\*$/,function(t,n){var e=n?"".concat(n,"[^/]+"):"[^/]*";return"".concat(e,"(?=$|\\/$)")}]],l=Object.create(null),d=function(t){return"string"==typeof t},g=function(t,e){var r=t,o=!1;return 0===t.indexOf("!")&&(o=!0,t=t.substr(1)),new function t(e,r,i,u){n(this,t),this.origin=e,this.pattern=r,this.negative=i,this.regex=u}(r,t=t.replace(i,"!").replace(u,"#"),o,function(t,n,e){var r=l[t];if(r)return r;var i=h.reduce(function(n,e){return n.replace(e[0],e[1].bind(t))},t);return l[t]=e?new RegExp(i,"i"):new RegExp(i)}(t,0,e))},v=function(t,n){throw new n(t)},p=function t(n,e,r){if(!d(n))return r("path must be a string, but got `".concat(e,"`"),TypeError);if(!n)return r("path must not be empty",TypeError);if(t.isNotRelative(n)){return r("path should be a ".concat("`path.relative()`d",' string, but got "').concat(e,'"'),RangeError)}return!0},_=function(t){return c.test(t)};p.isNotRelative=_,p.convert=function(t){return t};var y=function(){function i(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).ignorecase,e=void 0===t||t;n(this,i),this._rules=[],this._ignorecase=e,s(this,a,!0),this._initCache()}return function(n,e,r){return e&&t(n.prototype,e),r&&t(n,r),n}(i,[{key:"_initCache",value:function(){this._ignoreCache=Object.create(null),this._testCache=Object.create(null)}},{key:"_addPattern",value:function(t){if(t&&t[a])return this._rules=this._rules.concat(t._rules),this._added=!0,void 0;if(function(t){return t&&d(t)&&!r.test(t)&&0!==t.indexOf("#")}(t)){var n=g(t,this._ignorecase);this._added=!0,this._rules.push(n)}}},{key:"add",value:function(t){return this._added=!1,e(d(t)?function(t){return t.split(o)}(t):t).forEach(this._addPattern,this),this._added&&this._initCache(),this}},{key:"addPattern",value:function(t){return this.add(t)}},{key:"_testOne",value:function(t,n){var e=!1,r=!1;return this._rules.forEach(function(i){var u=i.negative;r===u&&e!==r||u&&!e&&!r&&!n||i.regex.test(t)&&(e=!u,r=u)}),{ignored:e,unignored:r}}},{key:"_test",value:function(t,n,e,r){var i=t&&p.convert(t);return p(i,t,v),this._t(i,n,e,r)}},{key:"_t",value:function(t,n,e,r){if(t in n)return n[t];if(r||(r=t.split("/")),r.pop(),!r.length)return n[t]=this._testOne(t,e);var i=this._t(r.join("/")+"/",n,e,r);return n[t]=i.ignored?i:this._testOne(t,e)}},{key:"ignores",value:function(t){return this._test(t,this._ignoreCache,!1).ignored}},{key:"createFilter",value:function(){var t=this;return function(n){return!t.ignores(n)}}},{key:"filter",value:function(t){return e(t).filter(this.createFilter())}},{key:"test",value:function(t){return this._test(t,this._testCache,!0)}}]),i}(),b=function(t){return new y(t)},$=function(){return!1};if(b.isPathValid=function(t){return p(t&&p.convert(t),t,$)},b.default=b,module.exports=b,"undefined"!=typeof process&&(process.env&&process.env.IGNORE_TEST_WIN32||"win32"===process.platform)){p.convert=function(t){return/^\\\\\?\\/.test(t)||/[\0-\x1F"<>\|]+/.test(t)?t:t.replace(/\\/g,"/")};var k=/^[a-z]:\//i;p.isNotRelative=function(t){return k.test(t)||_(t)}}