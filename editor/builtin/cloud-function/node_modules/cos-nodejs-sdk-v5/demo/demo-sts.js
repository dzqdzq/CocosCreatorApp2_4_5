var e=require("qcloud-cos-sts"),t=require("../index"),o=require("./config"),c=o.Bucket.substr(o.Bucket.lastIndexOf("-")+1),r={version:"2.0",statement:[{action:["name/cos:PutObject","name/cos:PostObject","name/cos:InitiateMultipartUpload","name/cos:ListMultipartUploads","name/cos:ListParts","name/cos:UploadPart","name/cos:CompleteMultipartUpload"],effect:"allow",principal:{qcs:["*"]},resource:["qcs::cos:"+o.Region+":uid/"+c+":"+o.Bucket+"/*"]}]};new t({getAuthorization:function(t,c){e.getCredential({secretId:o.SecretId,secretKey:o.SecretKey,policy:r,durationSeconds:7200,proxy:"",region:"ap-guangzhou"},function(e,t){if(e)console.error(e);else{var o=t.credentials;c({TmpSecretId:o.tmpSecretId,TmpSecretKey:o.tmpSecretKey,XCosSecurityToken:o.sessionToken,ExpiredTime:t.expiredTime})}})}}).putObject({Bucket:o.Bucket,Region:o.Region,Key:"dir/1.txt",Body:"hello!"},function(e,t){console.log(e||t)});