"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readdir=exports.readdirWithFileTypes=exports.read=void 0;const t=require("@nodelib/fs.stat"),e=require("../constants"),r=require("../utils"),n=require("./common");function s(t,e){return e.fs.readdirSync(t,{withFileTypes:!0}).map(s=>{const i={dirent:s,name:s.name,path:n.joinPathSegments(t,s.name,e.pathSegmentSeparator)};if(i.dirent.isSymbolicLink()&&e.followSymbolicLinks)try{const t=e.fs.statSync(i.path);i.dirent=r.fs.createDirentFromStats(i.name,t)}catch(t){if(e.throwErrorOnBrokenSymbolicLink)throw t}return i})}function i(e,s){return s.fs.readdirSync(e).map(i=>{const a=n.joinPathSegments(e,i,s.pathSegmentSeparator),o=t.statSync(a,s.fsStatSettings),c={name:i,path:a,dirent:r.fs.createDirentFromStats(i,o)};return s.stats&&(c.stats=o),c})}exports.read=function(t,r){return!r.stats&&e.IS_SUPPORT_READDIR_WITH_FILE_TYPES?s(t,r):i(t,r)},exports.readdirWithFileTypes=s,exports.readdir=i;